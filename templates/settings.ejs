<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('partials/head', { title: 'Settings', stylesheets: ['styles', 'settings']}) %>
    <script src="settings.js" defer></script>
</head>
<body data-user="<%=user.id%>">
<main>
    <header class="division">
        <h1>Financialytics - Settings</h1>
        <img id="go-back" src="arrow-go-back.svg" alt="Back">
    </header>
    <section class="division">
        <h2>Targets Configuration</h2>
        <span>Note: Catgories are unable to be deleted if a transaction uses that category!</span>
        <table>
            <thead>
                <tr>
                    <th>Category</th>
                    <th>Target</th>
                    <th>Include</th>
                </tr>
            </thead>
            <tbody>
                <% for (const target in targets) { %>
                    <tr id="<%=targets[target].name.replace(' ', '')%>">
                        <td>
                            <input type="text" class="text-input" value="<%=toTitleCase(targets[target].name)%>">
                        </td>
                        <td>
                            <input type="number" class="value-input" value="<%=targets[target].amount / 100%>" min="0" step="0.01">
                        </td>
                        <td>
                            <input type="checkbox" class="included-input" <% if (targets[target].included) { %>checked<% } %>>
                        </td>
                        <td>
                            <% if (!categories.has(targets[target].name)) {%>
                                <button class="delete-button">Delete</button>
                            <% } %>
                        </td>
                    </tr>
                <% } %>
                <tr id="button-row">
                    <td><button id="save-button">Save</button></td>
                    <td><button id="add-button">Add Target</button></td>
                </tr>
            </tbody>
        </table>
    </section>
    <section class="division">
        <h2>Profile Configuration</h2>
    </section>
</main>
</body>
</html>